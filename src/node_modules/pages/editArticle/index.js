import React, { useEffect, useState } from "react";
import { useParams } from "react-router-dom";
import ArticleForm from "components/articleForm";
import useFetch from "hooks/useFetch";

const EditArticle = () => {
  const params = useParams();
  const apiUrl = `/articles/${params.slug}`;
  const [{response: fetchArticleResponse}, doFetchArticle] = useFetch( apiUrl );
  const [{
    response: updateArticleResponse,
    error: updateArticleError
  }, doUpdateArticle] = useFetch( apiUrl );

  const [initialValues, setInitialValues] = useState(null);

  useEffect( () => {
    doFetchArticle();
  }, [doFetchArticle] );

  return (
      <ArticleForm
        onSubmit={handleSubmit}
        errors={(updateArticleError && updateArticleError.errors) || {}}
        initialValues={initialValues}
      />
  )
};

export default EditArticle;