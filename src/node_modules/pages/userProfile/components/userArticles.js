import React, { useEffect } from "react";
import { stringify } from "query-string";

import { getPaginator, limit } from "utils";
import useFetch from "hooks/useFetch";

const UserArticles = ( {username, location, isFavorites} ) => {
  const {offset, currentPage} = getPaginator( location.search );

  const getApiUrl = ( {username, location, isFavorites} ) => {
    const params = isFavorites
        ? {limit, offset, favorited: username}
        : {limit, offset, author: username};

    return `/articles?${stringify( params )}`;
  };

  const apiUrl = getApiUrl( {username, offset, isFavorites} );
  const [{response, isLoading, error}, doFetch] = useFetch(apiUrl);
  console.log(response)

  useEffect(()=>{
    doFetch();
  },[doFetch])


  return <div>User Articles</div>;
};

export default UserArticles;